{% for i in file_path_list %}
<p>{{ i }}</p>
{% endfor %}
<script>
var file_path_list={{ file_path_list|safe }};
var max_hierarchy_number={{ max_hierarchy_number }};
var file_path_list_list=[];
for (var i=0; i<file_path_list.length; i++ ){
    var file_path=file_path_list[i].split("/");
    file_path_list_list.push(file_path);
};

var file_path_hierarchy_list=[];
for (var ii=0; ii<max_hierarchy_number+1; ii++){
a=[];    
for (var i of file_path_list_list){

        if (i.length-1==ii){
            a.push(i)
        };
    };
    file_path_hierarchy_list.push(a);
};
file_path_hierarchy_list2=[];
for (var i=0; i<file_path_hierarchy_list.length-1; i++){
    bb=[];
    jj=[];
    cc=[];
    for (var ii of file_path_hierarchy_list[i]){
        var aa=[];
        for (var iii of file_path_hierarchy_list[i+1]){
            dd=iii.slice();
            ee=ii.slice();
            dd.pop();
            ff=ee.join("/")
            gg=dd.join("/")
            if (gg==ff){
                 aa.push(iii[iii.length-1]);
                 hh=gg;
            };

};

if (aa.length!=0){
    aa.unshift(hh);
    cc.push(aa);
};
    };

 file_path_hierarchy_list2.push(cc)   ;
};
alert(file_path_hierarchy_list2);


</script>